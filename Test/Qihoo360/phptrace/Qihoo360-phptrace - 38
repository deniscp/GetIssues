
    "url": "https://api.github.com/repos/Qihoo360/phptrace/issues/38",
    "labels_url": "https://api.github.com/repos/Qihoo360/phptrace/issues/38/labels{/name}",
    "comments_url": "https://api.github.com/repos/Qihoo360/phptrace/issues/38/comments",
    "events_url": "https://api.github.com/repos/Qihoo360/phptrace/issues/38/events",
    "html_url": "https://github.com/Qihoo360/phptrace/issues/38",
    "id": 103539693,
    "number": 38,
    "title": "php7 support?",
    "user": {
      "login": "jhdxr",
      "id": 1993373,
      "avatar_url": "https://avatars.githubusercontent.com/u/1993373?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhdxr",
      "html_url": "https://github.com/jhdxr",
      "followers_url": "https://api.github.com/users/jhdxr/followers",
      "following_url": "https://api.github.com/users/jhdxr/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhdxr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhdxr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhdxr/subscriptions",
      "organizations_url": "https://api.github.com/users/jhdxr/orgs",
      "repos_url": "https://api.github.com/users/jhdxr/repos",
      "events_url": "https://api.github.com/users/jhdxr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhdxr/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "milestone": null,
    "comments": 0,
    "created_at": "2015-08-27T15:49:58Z",
    "updated_at": "2015-08-27T15:49:58Z",
    "closed_at": null,
    "body": "Does phptrace support php7 or not? I'm trying compile it under PHP 7.0.0-dev (cli) (built: Aug 27 2015 00:25:27) and failed. Here is the log (CentOS7 x64)\r\n```\r\nConfiguring for:\r\nPHP Api Version:         20131218\r\nZend Module Api No:      20141001\r\nZend Extension Api No:   320140815\r\nchecking for grep that handles long lines and -e... /bin/grep\r\nchecking for egrep... /bin/grep -E\r\nchecking for a sed that does not truncate output... /bin/sed\r\nchecking for cc... cc\r\nchecking whether the C compiler works... yes\r\nchecking for C compiler default output file name... a.out\r\nchecking for suffix of executables... \r\nchecking whether we are cross compiling... no\r\nchecking for suffix of object files... o\r\nchecking whether we are using the GNU C compiler... yes\r\nchecking whether cc accepts -g... yes\r\nchecking for cc option to accept ISO C89... none needed\r\nchecking how to run the C preprocessor... cc -E\r\nchecking for icc... no\r\nchecking for suncc... no\r\nchecking whether cc understands -c and -o together... yes\r\nchecking for system library directory... lib\r\nchecking if compiler supports -R... no\r\nchecking if compiler supports -Wl,-rpath,... yes\r\nchecking build system type... x86_64-unknown-linux-gnu\r\nchecking host system type... x86_64-unknown-linux-gnu\r\nchecking target system type... x86_64-unknown-linux-gnu\r\nchecking for PHP prefix... /root/.phpbrew/php/php-master\r\nchecking for PHP includes... -I/root/.phpbrew/php/php-master/include/php -I/root/.phpbrew/php/php-master/include/php/main -I/root/.phpbrew/php/php-master/include/php/TSRM -I/root/.phpbrew/php/php-master/include/php/Zend -I/root/.phpbrew/php/php-master/include/php/ext -I/root/.phpbrew/php/php-master/include/php/ext/date/lib\r\nchecking for PHP extension directory... /root/.phpbrew/php/php-master/lib/php/extensions/no-debug-non-zts-20141001\r\nchecking for PHP installed headers prefix... /root/.phpbrew/php/php-master/include/php\r\nchecking if debug is enabled... no\r\nchecking if zts is enabled... no\r\nchecking for re2c... no\r\nconfigure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.\r\nchecking for gawk... gawk\r\nchecking whether to enable trace support... yes, shared\r\nchecking for mmap... yes\r\nchecking for munmap... yes\r\nchecking for ld used by cc... /bin/ld\r\nchecking if the linker (/bin/ld) is GNU ld... yes\r\nchecking for /bin/ld option to reload object files... -r\r\nchecking for BSD-compatible nm... /bin/nm -B\r\nchecking whether ln -s works... yes\r\nchecking how to recognize dependent libraries... pass_all\r\nchecking for ANSI C header files... yes\r\nchecking for sys/types.h... yes\r\nchecking for sys/stat.h... yes\r\nchecking for stdlib.h... yes\r\nchecking for string.h... yes\r\nchecking for memory.h... yes\r\nchecking for strings.h... yes\r\nchecking for inttypes.h... yes\r\nchecking for stdint.h... yes\r\nchecking for unistd.h... yes\r\nchecking dlfcn.h usability... yes\r\nchecking dlfcn.h presence... yes\r\nchecking for dlfcn.h... yes\r\nchecking the maximum length of command line arguments... 1572864\r\nchecking command to parse /bin/nm -B output from cc object... ok\r\nchecking for objdir... .libs\r\nchecking for ar... ar\r\nchecking for ranlib... ranlib\r\nchecking for strip... strip\r\nchecking if cc supports -fno-rtti -fno-exceptions... no\r\nchecking for cc option to produce PIC... -fPIC\r\nchecking if cc PIC flag -fPIC works... yes\r\nchecking if cc static flag -static works... no\r\nchecking if cc supports -c -o file.o... yes\r\nchecking whether the cc linker (/bin/ld -m elf_x86_64) supports shared libraries... yes\r\nchecking whether -lc should be explicitly linked in... no\r\nchecking dynamic linker characteristics... GNU/Linux ld.so\r\nchecking how to hardcode library paths into programs... immediate\r\nchecking whether stripping libraries is possible... yes\r\nchecking if libtool supports shared libraries... yes\r\nchecking whether to build shared libraries... yes\r\nchecking whether to build static libraries... no\r\n\r\ncreating libtool\r\nappending configuration tag \"CXX\" to libtool\r\nconfigure: creating ./config.status\r\nconfig.status: creating config.h\r\nmake: Entering directory `/root/.phpbrew/build/php-master/ext/trace/extension'\r\n/bin/sh /root/.phpbrew/build/php-master/ext/trace/extension/libtool --mode=compile cc  -I. -I/root/.phpbrew/build/php-master/ext/trace/extension -DPHP_ATOM_INC -I/root/.phpbrew/build/php-master/ext/trace/extension/include -I/root/.phpbrew/build/php-master/ext/trace/extension/main -I/root/.phpbrew/build/php-master/ext/trace/extension -I/root/.phpbrew/php/php-master/include/php -I/root/.phpbrew/php/php-master/include/php/main -I/root/.phpbrew/php/php-master/include/php/TSRM -I/root/.phpbrew/php/php-master/include/php/Zend -I/root/.phpbrew/php/php-master/include/php/ext -I/root/.phpbrew/php/php-master/include/php/ext/date/lib -I/root/.phpbrew/build/php-master/ext/trace/extension/common  -DHAVE_CONFIG_H  -g -O2   -c /root/.phpbrew/build/php-master/ext/trace/extension/trace.c -o trace.lo \r\nmkdir .libs\r\n cc -I. -I/root/.phpbrew/build/php-master/ext/trace/extension -DPHP_ATOM_INC -I/root/.phpbrew/build/php-master/ext/trace/extension/include -I/root/.phpbrew/build/php-master/ext/trace/extension/main -I/root/.phpbrew/build/php-master/ext/trace/extension -I/root/.phpbrew/php/php-master/include/php -I/root/.phpbrew/php/php-master/include/php/main -I/root/.phpbrew/php/php-master/include/php/TSRM -I/root/.phpbrew/php/php-master/include/php/Zend -I/root/.phpbrew/php/php-master/include/php/ext -I/root/.phpbrew/php/php-master/include/php/ext/date/lib -I/root/.phpbrew/build/php-master/ext/trace/extension/common -DHAVE_CONFIG_H -g -O2 -c /root/.phpbrew/build/php-master/ext/trace/extension/trace.c  -fPIC -DPIC -o .libs/trace.o\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c: In function ‘zm_startup_trace’:\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:208:29: warning: assignment from incompatible pointer type [enabled by default]\r\n     pt_ori_execute_internal = zend_execute_internal;\r\n                             ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:209:27: warning: assignment from incompatible pointer type [enabled by default]\r\n     zend_execute_internal = pt_execute_internal;\r\n                           ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c: In function ‘zm_shutdown_trace’:\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:248:27: warning: assignment from incompatible pointer type [enabled by default]\r\n     zend_execute_internal = pt_ori_execute_internal;\r\n                           ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c: In function ‘pt_frame_build’:\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:330:12: error: ‘zend_execute_data’ has no member named ‘function_state’\r\n     zf = ex->function_state.function;\r\n            ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:345:21: error: ‘zend_execute_data’ has no member named ‘object’\r\n         if (ex && ex->object) {\r\n                     ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:352:17: warning: passing argument 1 of ‘sdsnew’ from incompatible pointer type [enabled by default]\r\n                 frame->class = sdsnew(zf->common.scope->name);\r\n                 ^\r\nIn file included from /root/.phpbrew/build/php-master/ext/trace/extension/common/trace_type.h:21:0,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/common/trace_comm.h:22,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/php_trace.h:37,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:24:\r\n/root/.phpbrew/build/php-master/ext/trace/extension/common/sds/sds.h:58:5: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n sds sdsnew(const char *init);\r\n     ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:360:13: warning: passing argument 1 of ‘sdsnew’ from incompatible pointer type [enabled by default]\r\n             frame->class = sdsnew(zf->common.scope->name);\r\n             ^\r\nIn file included from /root/.phpbrew/build/php-master/ext/trace/extension/common/trace_type.h:21:0,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/common/trace_comm.h:22,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/php_trace.h:37,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:24:\r\n/root/.phpbrew/build/php-master/ext/trace/extension/common/sds/sds.h:58:5: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n sds sdsnew(const char *init);\r\n     ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:366:9: warning: passing argument 1 of ‘strlen’ from incompatible pointer type [enabled by default]\r\n         if (strcmp(zf->common.function_name, \"{closure}\") == 0) {\r\n         ^\r\nIn file included from /root/.phpbrew/php/php-master/include/php/main/../main/php_config.h:2483:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_config.h:1,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_portability.h:48,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_types.h:26,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend.h:31,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:35,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/usr/include/string.h:395:15: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n extern size_t strlen (const char *__s)\r\n               ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:366:9: warning: passing argument 1 of ‘__builtin_strcmp’ from incompatible pointer type [enabled by default]\r\n         if (strcmp(zf->common.function_name, \"{closure}\") == 0) {\r\n         ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:366:9: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:366:9: warning: passing argument 1 of ‘strlen’ from incompatible pointer type [enabled by default]\r\nIn file included from /root/.phpbrew/php/php-master/include/php/main/../main/php_config.h:2483:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_config.h:1,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_portability.h:48,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_types.h:26,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend.h:31,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:35,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/usr/include/string.h:395:15: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n extern size_t strlen (const char *__s)\r\n               ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:366:9: warning: passing argument 1 of ‘__builtin_strcmp’ from incompatible pointer type [enabled by default]\r\n         if (strcmp(zf->common.function_name, \"{closure}\") == 0) {\r\n         ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:366:9: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:366:9: warning: passing argument 1 of ‘__builtin_strcmp’ from incompatible pointer type [enabled by default]\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:366:9: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:366:9: warning: passing argument 1 of ‘__builtin_strcmp’ from incompatible pointer type [enabled by default]\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:366:9: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:368:9: warning: passing argument 1 of ‘strlen’ from incompatible pointer type [enabled by default]\r\n         } else if (strcmp(zf->common.function_name, \"__lambda_func\") == 0) {\r\n         ^\r\nIn file included from /root/.phpbrew/php/php-master/include/php/main/../main/php_config.h:2483:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_config.h:1,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_portability.h:48,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_types.h:26,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend.h:31,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:35,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/usr/include/string.h:395:15: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n extern size_t strlen (const char *__s)\r\n               ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:368:9: warning: passing argument 1 of ‘__builtin_strcmp’ from incompatible pointer type [enabled by default]\r\n         } else if (strcmp(zf->common.function_name, \"__lambda_func\") == 0) {\r\n         ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:368:9: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:368:9: warning: passing argument 1 of ‘strlen’ from incompatible pointer type [enabled by default]\r\nIn file included from /root/.phpbrew/php/php-master/include/php/main/../main/php_config.h:2483:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_config.h:1,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_portability.h:48,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_types.h:26,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend.h:31,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:35,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/usr/include/string.h:395:15: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n extern size_t strlen (const char *__s)\r\n               ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:368:9: warning: passing argument 1 of ‘__builtin_strcmp’ from incompatible pointer type [enabled by default]\r\n         } else if (strcmp(zf->common.function_name, \"__lambda_func\") == 0) {\r\n         ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:368:9: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:368:9: warning: passing argument 1 of ‘__builtin_strcmp’ from incompatible pointer type [enabled by default]\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:368:9: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:368:9: warning: passing argument 1 of ‘__builtin_strcmp’ from incompatible pointer type [enabled by default]\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:368:9: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:376:65: error: ‘zend_execute_data’ has no member named ‘object’\r\n             frame->function = sdsnew(zend_resolve_method_name(ex->object ? Z_OBJCE_P(ex->object) : zf->common.scope, zf));\r\n                                                                 ^\r\nIn file included from /root/.phpbrew/php/php-master/include/php/Zend/zend.h:31:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:35,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:376:88: error: ‘zend_execute_data’ has no member named ‘object’\r\n             frame->function = sdsnew(zend_resolve_method_name(ex->object ? Z_OBJCE_P(ex->object) : zf->common.scope, zf));\r\n                                                                                        ^\r\n/root/.phpbrew/php/php-master/include/php/Zend/zend_types.h:529:26: note: in definition of macro ‘Z_OBJ’\r\n #define Z_OBJ(zval)     (zval).value.obj\r\n                          ^\r\n/root/.phpbrew/php/php-master/include/php/Zend/zend_types.h:542:29: note: in expansion of macro ‘Z_OBJCE’\r\n #define Z_OBJCE_P(zval_p)   Z_OBJCE(*(zval_p))\r\n                             ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:376:76: note: in expansion of macro ‘Z_OBJCE_P’\r\n             frame->function = sdsnew(zend_resolve_method_name(ex->object ? Z_OBJCE_P(ex->object) : zf->common.scope, zf));\r\n                                                                            ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:379:13: warning: passing argument 1 of ‘sdsnew’ from incompatible pointer type [enabled by default]\r\n             frame->function = sdsnew(zf->common.function_name);\r\n             ^\r\nIn file included from /root/.phpbrew/build/php-master/ext/trace/extension/common/trace_type.h:21:0,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/common/trace_comm.h:22,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/php_trace.h:37,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:24:\r\n/root/.phpbrew/build/php-master/ext/trace/extension/common/sds/sds.h:58:5: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n sds sdsnew(const char *init);\r\n     ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:390:21: error: ‘zend_execute_data’ has no member named ‘function_state’\r\n         if (ex && ex->function_state.arguments) {\r\n                     ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:391:58: error: ‘zend_execute_data’ has no member named ‘function_state’\r\n             frame->arg_count = (int)(zend_uintptr_t) *(ex->function_state.arguments);\r\n                                                          ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:392:32: error: ‘zend_execute_data’ has no member named ‘function_state’\r\n             args = (zval **)(ex->function_state.arguments - frame->arg_count);\r\n                                ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:453:13: warning: passing argument 1 of ‘strlen’ from incompatible pointer type [enabled by default]\r\n             frame->args[0] = sdscatrepr(sdsempty(), zf->op_array.filename, strlen(zf->op_array.filename));\r\n             ^\r\nIn file included from /root/.phpbrew/php/php-master/include/php/main/../main/php_config.h:2483:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_config.h:1,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_portability.h:48,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_types.h:26,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend.h:31,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:35,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/usr/include/string.h:395:15: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n extern size_t strlen (const char *__s)\r\n               ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:453:13: warning: passing argument 2 of ‘sdscatrepr’ from incompatible pointer type [enabled by default]\r\n             frame->args[0] = sdscatrepr(sdsempty(), zf->op_array.filename, strlen(zf->op_array.filename));\r\n             ^\r\nIn file included from /root/.phpbrew/build/php-master/ext/trace/extension/common/trace_type.h:21:0,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/common/trace_comm.h:22,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/php_trace.h:37,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:24:\r\n/root/.phpbrew/build/php-master/ext/trace/extension/common/sds/sds.h:89:5: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n sds sdscatrepr(sds s, const char *p, size_t len);\r\n     ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:474:17: error: ‘zend_execute_data’ has no member named ‘op_array’\r\n     if (ex && ex->op_array) {\r\n                 ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:475:36: error: ‘zend_execute_data’ has no member named ‘op_array’\r\n         frame->filename = sdsnew(ex->op_array->filename);\r\n                                    ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:476:68: error: ‘zend_execute_data’ has no member named ‘op_array’\r\n     } else if (ex && ex->prev_execute_data && ex->prev_execute_data->op_array) {\r\n                                                                    ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:477:55: error: ‘zend_execute_data’ has no member named ‘op_array’\r\n         frame->filename = sdsnew(ex->prev_execute_data->op_array->filename); /* try using prev */\r\n                                                       ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:479:9: warning: passing argument 1 of ‘sdsnew’ from incompatible pointer type [enabled by default]\r\n         frame->filename = sdsnew(op_array->filename);\r\n         ^\r\nIn file included from /root/.phpbrew/build/php-master/ext/trace/extension/common/trace_type.h:21:0,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/common/trace_comm.h:22,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/php_trace.h:37,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:24:\r\n/root/.phpbrew/build/php-master/ext/trace/extension/common/sds/sds.h:58:5: note: expected ‘const char *’ but argument is of type ‘struct zend_string *’\r\n sds sdsnew(const char *init);\r\n     ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c: In function ‘pt_frame_set_retval’:\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:517:26: error: ‘zend_fcall_info’ has no member named ‘retval_ptr_ptr’\r\n             retval = *fci->retval_ptr_ptr;\r\n                          ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:519:60: error: invalid type argument of ‘->’ (have ‘int’)\r\n             retval = EX_TMP_VAR(ex, ex->opline->result.var)->var.ptr;\r\n                                                            ^\r\nIn file included from /root/.phpbrew/php/php-master/include/php/Zend/zend_globals.h:28:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_compile.h:656,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_modules.h:26,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_API.h:26,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:39,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/root/.phpbrew/php/php-master/include/php/Zend/zend_globals_macros.h:46:33: error: ‘zend_executor_globals’ has no member named ‘return_value_ptr_ptr’\r\n # define EG(v) (executor_globals.v)\r\n                                 ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:530:17: note: in expansion of macro ‘EG’\r\n     } else if (*EG(return_value_ptr_ptr)) {\r\n                 ^\r\n/root/.phpbrew/php/php-master/include/php/Zend/zend_globals_macros.h:46:33: error: ‘zend_executor_globals’ has no member named ‘return_value_ptr_ptr’\r\n # define EG(v) (executor_globals.v)\r\n                                 ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:531:19: note: in expansion of macro ‘EG’\r\n         retval = *EG(return_value_ptr_ptr);\r\n                   ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c: In function ‘pt_repr_zval’:\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:755:14: error: ‘IS_BOOL’ undeclared (first use in this function)\r\n         case IS_BOOL:\r\n              ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:755:14: note: each undeclared identifier is reported only once for each function it appears in\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:781:80: error: ‘zend_uint’ undeclared (first use in this function)\r\n                 Z_OBJ_HANDLER(*zv, get_class_name)(zv, (const char **) &tstr, (zend_uint *) &tlen, 0 TSRMLS_CC);\r\n                                                                                ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:781:91: error: expected expression before ‘)’ token\r\n                 Z_OBJ_HANDLER(*zv, get_class_name)(zv, (const char **) &tstr, (zend_uint *) &tlen, 0 TSRMLS_CC);\r\n                                                                                           ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:781:91: warning: passing argument 1 of ‘zv->value.obj->handlers->get_class_name’ from incompatible pointer type [enabled by default]\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:781:91: note: expected ‘const struct zend_object *’ but argument is of type ‘struct zval *’\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:781:91: error: too many arguments to function ‘zv->value.obj->handlers->get_class_name’\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:789:13: warning: passing argument 1 of ‘zend_rsrc_list_get_rsrc_type’ makes pointer from integer without a cast [enabled by default]\r\n             tstr = (char *) zend_rsrc_list_get_rsrc_type(Z_LVAL_P(zv) TSRMLS_CC);\r\n             ^\r\nIn file included from /root/.phpbrew/php/php-master/include/php/Zend/zend_API.h:27:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:39,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/root/.phpbrew/php/php-master/include/php/Zend/zend_list.h:68:22: note: expected ‘struct zend_resource *’ but argument is of type ‘zend_long’\r\n ZEND_API const char *zend_rsrc_list_get_rsrc_type(zend_resource *res);\r\n                      ^\r\nIn file included from /root/.phpbrew/php/php-master/include/php/Zend/zend_globals.h:28:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_compile.h:656,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_modules.h:26,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_API.h:26,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:39,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c: In function ‘pt_execute_core’:\r\n/root/.phpbrew/php/php-master/include/php/Zend/zend_globals_macros.h:46:33: error: ‘zend_executor_globals’ has no member named ‘return_value_ptr_ptr’\r\n # define EG(v) (executor_globals.v)\r\n                                 ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:909:26: note: in expansion of macro ‘EG’\r\n         if (!internal && EG(return_value_ptr_ptr) == NULL) {\r\n                          ^\r\n/root/.phpbrew/php/php-master/include/php/Zend/zend_globals_macros.h:46:33: error: ‘zend_executor_globals’ has no member named ‘return_value_ptr_ptr’\r\n # define EG(v) (executor_globals.v)\r\n                                 ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:910:13: note: in expansion of macro ‘EG’\r\n             EG(return_value_ptr_ptr) = &retval;\r\n             ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:943:17: warning: passing argument 2 of ‘execute_internal’ from incompatible pointer type [enabled by default]\r\n                 execute_internal(execute_data, fci, rvu TSRMLS_CC);\r\n                 ^\r\nIn file included from /root/.phpbrew/php/php-master/include/php/Zend/zend_API.h:30:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:39,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/root/.phpbrew/php/php-master/include/php/Zend/zend_execute.h:42:15: note: expected ‘struct zval *’ but argument is of type ‘struct zend_fcall_info *’\r\n ZEND_API void execute_internal(zend_execute_data *execute_data, zval *return_value);\r\n               ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:943:17: error: too many arguments to function ‘execute_internal’\r\n                 execute_internal(execute_data, fci, rvu TSRMLS_CC);\r\n                 ^\r\nIn file included from /root/.phpbrew/php/php-master/include/php/Zend/zend_API.h:30:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:39,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/root/.phpbrew/php/php-master/include/php/Zend/zend_execute.h:42:15: note: declared here\r\n ZEND_API void execute_internal(zend_execute_data *execute_data, zval *return_value);\r\n               ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:973:13: warning: passing argument 1 of ‘_zval_ptr_dtor’ from incompatible pointer type [enabled by default]\r\n             zval_ptr_dtor(&retval);\r\n             ^\r\nIn file included from /root/.phpbrew/php/php-master/include/php/Zend/zend.h:39:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:35,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/root/.phpbrew/php/php-master/include/php/Zend/zend_variables.h:111:15: note: expected ‘struct zval *’ but argument is of type ‘struct zval **’\r\n ZEND_API void _zval_ptr_dtor(zval *zval_ptr ZEND_FILE_LINE_DC);\r\n               ^\r\nIn file included from /root/.phpbrew/php/php-master/include/php/Zend/zend_globals.h:28:0,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_compile.h:656,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_modules.h:26,\r\n                 from /root/.phpbrew/php/php-master/include/php/Zend/zend_API.h:26,\r\n                 from /root/.phpbrew/php/php-master/include/php/main/php.h:39,\r\n                 from /root/.phpbrew/build/php-master/ext/trace/extension/trace.c:21:\r\n/root/.phpbrew/php/php-master/include/php/Zend/zend_globals_macros.h:46:33: error: ‘zend_executor_globals’ has no member named ‘return_value_ptr_ptr’\r\n # define EG(v) (executor_globals.v)\r\n                                 ^\r\n/root/.phpbrew/build/php-master/ext/trace/extension/trace.c:974:13: note: in expansion of macro ‘EG’\r\n             EG(return_value_ptr_ptr) = NULL;\r\n             ^\r\nmake: *** [trace.lo] Error 1\r\nmake: Leaving directory `/root/.phpbrew/build/php-master/ext/trace/extension'\r\n\r\n```"
  